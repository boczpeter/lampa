<VirtualHost _default_:80>
  ServerName  lampa.kerekparosklub.hu
  Include     conf-available/redir-le.conf
</VirtualHost>

<VirtualHost _default_:443>
  ServerName    lampa.kerekparosklub.hu
  ServerAdmin   boczpeter@gmail.com
  DocumentRoot  /var/www/lampa
  ErrorLog      ${APACHE_LOG_DIR}/lampa-error.log
  CustomLog     ${APACHE_LOG_DIR}/lampa-access.log combined env=!dontlog
  # SetEnvIf    Remote_Addr "::1" dontlog

  Include       conf-available/options-ssl.conf
  RewriteEngine on

  # Pocketbase backend
  RewriteRule   ^/api/(.*)$     http://localhost:8190/api/$1  [P,L]
  RewriteRule   ^/_pbadm/(.*)$  http://localhost:8190/_/$1    [P,L]

  # serve .html files without extension in URL
  RewriteCond   "%{DOCUMENT_ROOT}%{REQUEST_URI}.html"   -f
    RewriteRule ^/(.*)$   /$1.html

  SSLCertificateFile      /etc/apache2/certs/lampa.kerekparosklub.hu.pem
  SSLCertificateKeyFile   /etc/apache2/certs/lampa.kerekparosklub.hu.key
</VirtualHost>
